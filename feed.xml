<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ben Blog</title>
    <description>一个小白的成长学习历程</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Tue, 26 Mar 2019 23:08:40 +0800</pubDate>
    <lastBuildDate>Tue, 26 Mar 2019 23:08:40 +0800</lastBuildDate>
    <generator>Jekyll v3.8.4</generator>
    
      <item>
        <title>「转载」只要你有这样的闪念就说明暂时还不适合做投资…… - 李笑来</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;转载自 &lt;a href=&quot;http://lixiaolai.com/2017/05/29/you-re-not-qulified-if-you-are-thinking-like-this/&quot;&gt;只要你有这样的闪念就说明暂时还不适合做投资……&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;有时候，“闪念”这个东西，只不过是大脑的神经元自己玩的一个游戏 —— 与其它本来并不相干的神经元突然连接一下，看看会发生什么……&lt;/p&gt;

&lt;p&gt;而另外一些时候，“闪念”其实是很多早已根深蒂固却暂时休眠的连接突然启动，于是，这些闪念其实是早就存在于那里的。&lt;/p&gt;

&lt;p&gt;以下这些闪念若是出现，总是属于上面说到的第二种：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;X 靠谱吗？你怎么看？你说 Y 能涨吗？&lt;/li&gt;
    &lt;li&gt;X 已经太贵了，买不起，我去看看 Y 吧……&lt;/li&gt;
    &lt;li&gt;真倒霉，一买就跌一卖就涨！&lt;/li&gt;
    &lt;li&gt;刚才没看到你们说什么，我错过了什么吗？&lt;/li&gt;
    &lt;li&gt;都一整天了，咋也不见涨呢！&lt;/li&gt;
    &lt;li&gt;靠，赚了赚了！我这就去换辆车！&lt;/li&gt;
    &lt;li&gt;妈的，跌成屎了，媳妇要跟我离婚！&lt;/li&gt;
    &lt;li&gt;唉！等我借来钱，已经涨上天了！&lt;/li&gt;
    &lt;li&gt;他们运气真好！我运气真差！&lt;/li&gt;
    &lt;li&gt;这帮傻逼！都是骗子！&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;这些闪念说明什么呢？说明你暂时还不适合做投资。因为在投资的交易市场里（比如股票市场），你绝大多数短期收益来自于他人的损失，你绝大多数的损失会归结成他人的收益。中文类比里有个词，叫“韭菜”，因为韭菜总是割掉一茬再长一茬…… 以上的闪念出现，就说明你还是韭菜，或者说更可能是韭菜，所以，还是暂时不要进去为妙 —— 做韭菜影响寿命的，方方面面的寿命。&lt;/p&gt;

&lt;p&gt;那怎么办呢？&lt;/p&gt;

&lt;p&gt;—— 不知道，永远没有人能让韭菜变成镰刀，一代又一代的人之中，大多数人到最后还是韭菜，谁也不知道为什么。&lt;/p&gt;

</description>
        <pubDate>Tue, 26 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/26/you-re-not-qulified-if-you-are-thinking-like-this/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/26/you-re-not-qulified-if-you-are-thinking-like-this/</guid>
        
        <category>精进</category>
        
        <category>转载</category>
        
        
      </item>
    
      <item>
        <title>「转载」当生活变成你并没想过要的…… - 李笑来</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;转载自 &lt;a href=&quot;http://lixiaolai.com/2018/10/05/when-life-turns-out-to-be-what-wasnt-expected/&quot;&gt;当生活变成你并没想过要的……&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;生活的诡异之处在于：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;一切的巨大的变化都是坏的 —— 无论是好的变化，还是坏的变化……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这并不是我的总结，这是《Story》的作者，著名编剧大师麦基在他的课上经常讲的一句话。&lt;/p&gt;

&lt;p&gt;为什么会出现这种情况呢？因为你每时每刻所具备的特质、技能，都是渐进积累的，都是为了你的彼时彼刻的“现状”所定制的…… 一旦巨大的变化发生，你的特质、你的技能，只能变成突然之间“不适用”了。&lt;/p&gt;

&lt;p&gt;于是，那变化越大，你需要积累、学会的技能就越大、越难；而留给你的时间常常并不多，甚至，那变化越大，你的时间越少…… 这就好像你车速 30 迈的时候，已经是老司机的你当然处理任何意外都“游刃有余”，可突然之间速度变成了 300 迈（类比上来看，甚至可能更高，比如 30,000 迈）的时候，你过往积累的所有经验所有技能不仅可能突然失效，甚至干脆会成为“威胁”…… 你说，这能不是坏事儿吗？&lt;/p&gt;

&lt;p&gt;而生活中最可怕的变化，很可能是与金钱相关的变化。你突然变得很富有，本质上来看和你突然变得很贫穷一样，不是什么好事儿。如果你的年收入从 20 万人民币变成了 30 万人民币，这谈不上是“巨大”的变化，只能是好事；可如果是 20 万到 200 万，甚至 2000 万的变化，那肯定是坏事儿，绝大多数人只不过是没机会“通过体验承认这个事实”而已。&lt;/p&gt;

&lt;p&gt;那种变化就好像是在院子里无忧无虑地生活的小白兔突然有一天被“放生”到亚马逊丛林里一样…… 食物结构变了，居住条件变了，面对的物种数量和种类也全都变了 —— 都是不熟悉的。&lt;/p&gt;

&lt;p&gt;当巨大变化发生的时候，避免自己被它绞杀的方法，没有人教我…… 幸亏我还有个自我保护的意识，所以，验证了一些有效的经验，归结起来只有一句话：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;尽量保持一些重要的生活部分“&lt;strong&gt;坚决不变&lt;/strong&gt;”。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;生活中有什么特别重要的部分呢？在我看来，其实就这么两个：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;亲情、友情&lt;/li&gt;
    &lt;li&gt;大脑的运作方式&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;在巨变之后，保持原有的“亲情、友情”不变，并不像很多人想象得那么简单。需要很多“站在对方角度思考”的努力，很多的时候，很少有人意识到“若是你不主动”，那么“情谊”其实是相当脆弱的一个东西。&lt;/p&gt;

&lt;p&gt;而第二个，“大脑的运作方式”，这一点太重要了。我原来写书，巨变发生之后，我还照样写书；我原来爱好读书，巨变发生之后照样读书；我原来喜欢宅在家里不去旅游，那么就依然宅在家里不去旅游；原来靠稿费生存，那么就依然靠稿费生存（于是，生活开销渐渐提高了一些，因为稿费更多了）……&lt;/p&gt;

&lt;p&gt;几年下来，回头细看，发现几乎所有“巨变之前没做过的事情，巨变之后做了的”，绝大部分都是失败的 —— 为什么呢？因为之前的经验和技能完全不适用么！&lt;/p&gt;

&lt;p&gt;幸运的是，过去的五年里我学会了一件事情，“&lt;strong&gt;资本管理&lt;/strong&gt;”。不仅是管自己的钱，更重要的是有能力管别人托管的钱 —— 这一点，实际上是过去的我完全没有机会体验的事情。五年后的某一天，我向当初向我托管资金的人们说：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;这五年来，我最感激的是你们。感谢绝大部分“以沉默作为支持”的人；同样也感激那些在这个过程中“捣乱、扯淡、甚至挖坑”的少数那么几个人 —— 为什么呢？因为没有你们，没有你们中的任何一个，我都不可能变成今天的我。支持的人，让我感受到责任；捣乱的人，让我感受到责任的同时也明白其中的不容易；挖坑的人，既然没有坑死我，那就只能让我变得更强…… 总之，全是感谢，没有任何其它一丝一毫。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;然后给这些人一个“大家只能感谢”的交代。&lt;/p&gt;

&lt;p&gt;从另外一个角度，与金钱相关的能力无非以下几个阶段：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;赚到钱&lt;/li&gt;
    &lt;li&gt;攒下钱&lt;/li&gt;
    &lt;li&gt;能让钱生钱&lt;/li&gt;
    &lt;li&gt;能管理更多的钱（即，不止自己的钱）&lt;/li&gt;
    &lt;li&gt;能长期做到好的管理成绩……&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;现在回头看，幸亏在 2013 年的时候，我意识到“巨变”可能并不是好事，开启了“自我保护”的过程 —— 用学习（一个之前不可能有机会学习的技能）作为自己逃出“巨变诅咒”的方式。&lt;/p&gt;

&lt;p&gt;五年过去，在与金钱相关的技能上，像打游戏一样终于“通关”。&lt;/p&gt;

&lt;p&gt;然而，“通关”再一次是个巨大的变化，希望之前的诀窍（尽量保持一些重要的生活部分“坚决不变”）继续生效……&lt;/p&gt;

</description>
        <pubDate>Tue, 26 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/26/when-life-turns-out-to-be-what-wasnt-expected/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/26/when-life-turns-out-to-be-what-wasnt-expected/</guid>
        
        <category>精进</category>
        
        <category>转载</category>
        
        
      </item>
    
      <item>
        <title>「转载」十分钟后开始使用英语 - 李笑来</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;转载自&lt;a href=&quot;http://lixiaolai.com/2016/06/11/makecs-appendix01/#more&quot;&gt;十分钟后开始使用英语……&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;阅读这一篇文章，最多需要十分钟而已，之后你就可以开始使用英语了。&lt;/p&gt;

&lt;p&gt;学习英语的最少必要知识是什么呢？&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;学会音标&lt;/li&gt;
    &lt;li&gt;学会查词典&lt;/li&gt;
    &lt;li&gt;学会查语法书&lt;/li&gt;
    &lt;li&gt;学会正确地提问&lt;/li&gt;
    &lt;li&gt;养成最基本语言学习习惯&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;1-学会音标&quot;&gt;1. 学会音标&lt;/h2&gt;

&lt;p&gt;音标只是一个符号系统。首先，任何人花上一下午就都可以学会。其次，千万别信那种胡说八道：“外国人都不用音标的”。先说说我们自己的母语，你什么时候见过一个受过教育的人不会用拼音的？遇到生词生字的时候，连拼音都不会的话，就算查到了，也不知道那字或词如何读。英语世界更是如此，要知道英语是目前地球上词汇量最多的语言，也就是说，在英语世界里，任何人遇到生词的概率都要大出许多许多倍 —— 只要是个正常受过教育的人，怎么可能不去查词典？怎么可能甘心于查了词典之后竟然不懂如何发音？&lt;/p&gt;

&lt;p&gt;学习音标真的很简单。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;从任何一本有文本的有声书中截取一段大约三五分钟的录音，然后把电子书的文本拷贝出来，粘贴复制到这个网站提供的工具里：http://upodn.com/phon.php ，然后你就会得到一个英语与音标对应的文本。（我是如何知道这个网站的？Google 呗 —— ‘Phonetic Transcription’……）三五分钟的语音中（大约三五百个词）一定包含了所有的音素（辅音、元音）……&lt;/li&gt;
    &lt;li&gt;一边看音标文本文件，一边反复跟读这段文本……&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;一个下午，任何一个正常成年人都能搞定。&lt;/p&gt;

&lt;h3 id=&quot;2-学会查词典&quot;&gt;2. 学会查词典&lt;/h3&gt;

&lt;p&gt;查词典，是学习语言的必需习惯 —— 正如学习是生活的必需习惯一样，也正如翻阅文档是开发者必需习惯一样，其实，哪个领域都是一样的。&lt;/p&gt;

&lt;p&gt;遇到生词就查。对，每一个。查着查着就越查越少了 —— 这是一定的。那些告诉你，“遇到生词（先）不（用）查，先猜”的人，让他们去屎。望文生义的笨蛋说的就是他们。&lt;/p&gt;

&lt;p&gt;一句话里感觉没有生词，可就是看不懂，原因可能是某个单词有另外的词义，而你却只知道最常用的词义。比如，“down”这个单词，竟然还可以做名词使用，意思是“小鸟小鸡身上的软毛”……&lt;/p&gt;

&lt;p&gt;那可能是有“你全都认识的词构成的你完全猜不到的词义”造成的，比如“purple passage”，“purple”你认识，“紫色的”，“passage”你也认识，“文章”，但“purple passage”是“辞藻过分华丽，金玉其外败絮其中的文章” —— 你可能就不知道了。&lt;/p&gt;

&lt;p&gt;还有一种情况是，语法结构弄不明白…… 比如，“as” 有很多用法，到底是哪一个呢？那就走下一步：查语法书。&lt;/p&gt;

&lt;h3 id=&quot;3-学会查语法书&quot;&gt;3. 学会查语法书&lt;/h3&gt;

&lt;p&gt;语法书是用来查的，不是用来背的 —— 你啥时候见过人们背地图？&lt;/p&gt;

&lt;p&gt;一张地图拿过来，知道“上北下南左西右东”，以及“少量标记符号”（比如，公交线长什么样，地铁线长什么样）这两个最少必要知识之后，就可以开始查地图了，不是吗？&lt;/p&gt;

&lt;p&gt;语法书也一样，除了你在初中的时候已经学过的一些基础语法概念，比如“名词”、“动词”、“形容词”、“副词”什么的之外，你还需要知道另外一个概念：“功能词”。什么叫功能词呢？就是那些在语法书的附录里，带着页码编号的词……&lt;/p&gt;

&lt;p&gt;你应该找个时间，比如一下午，大概翻翻那些功能词都有哪些，有个印象就好。&lt;/p&gt;

&lt;p&gt;然后，在遇到“没有生词、没有不了解的词义、没有不认识的词组，但就是读不懂的句子”的时候，仔细看看那句子里有没有功能词存在？有的话，去查查语法书，在附录里找到对应的页码（可能不止一个），按图索骥地查下去，一定能找到答案……&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;你以为你遇到过的英语老师啥都懂吗？不是的！他们就是比学生多一个技能：遇到问题的时候，他们懂得如何查词典，如何查语法书…… 哪个领域都是一样的 —— 你以为“高级程序员”什么都懂吗？某种意义上，他们只比那些“低级程序员”多一个技能：遇到问题的时候，他们懂得如何检索文档，如何问 Google……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;4-学会正确提问&quot;&gt;4. 学会正确提问&lt;/h3&gt;

&lt;p&gt;能问 Google 的，都不要去问别人，这是礼貌。&lt;/p&gt;

&lt;p&gt;别问人家这个单词什么意思，别问人家这句话什么意思 —— 自己动手去查！一个词典查不到，再换一个，换一个还查不到，还有 Gooogle 呢！&lt;/p&gt;

&lt;p&gt;实在查不明白，还有个办法，去 Google 那句原文，然后加上一个汉字“的”或者“了”（这两个字是中文中使用频率最高的词），这个搜索组合很可能让你找到已经有人在网上提问过……&lt;/p&gt;

&lt;p&gt;自己折腾过了，还搞不明白，再去问可能帮你的人 —— 他们也搞不定，也有可能，那就记在本子里。很神奇的事情是，大量的问题，都会在某一天自动出现解决方案的 —— 前提是，你还记得那个问题!&lt;/p&gt;

&lt;p&gt;不会正确提问，其实只不过是懒惰的表现，懒人是没救的，所以千万不能做懒人。&lt;/p&gt;

&lt;h3 id=&quot;5-养成最基本语言学习习惯&quot;&gt;5. 养成最基本语言学习习惯&lt;/h3&gt;

&lt;p&gt;朗读。天天朗读。每天朗读半小时，坚持两百天，才 100 小时…… 每天朗读一小时，坚持 100 天，也就是三个月多一点点 —— 你已经把 90% 的人甩在身后了，真的！&lt;/p&gt;

&lt;h3 id=&quot;6-阅读先行是很自然的&quot;&gt;6. 阅读先行是很自然的&lt;/h3&gt;

&lt;p&gt;口语难练，这是很正常的，因为在大多数情况下，我们读书、看电影的时候，由于面对的并不是真实的人，所以我们大脑中的“镜像神经元”很难被激发，于是学习能力处于“冬眠状态”。其实每个人都很有语言天赋的，顶多是一点点的好坏差异而已。你看，几乎任何一个人在一个新的城市里住上一周以上，口音就会发生一些微妙的变化，并且根本不是故意的（都没有刻意练习） —— 只是因为镜像神经元被激发了。&lt;/p&gt;

&lt;p&gt;可是阅读这东西，用不着镜像神经元过分活跃 —— 只是在小时候启动的时候可能需要（家长喜欢看书，孩子通常更容易喜欢看书）。所以，你要相信你的阅读能力可以很快提高的，事实上，确实如此 —— 只需要啃上一本原版书，基本上就过关了。&lt;/p&gt;

&lt;p&gt;选择原版书的时候，一定要选择自己感兴趣的领域 —— 英语教科书在这方面几乎是最差的。现在对你来说，这是个很好的机会，你不是对编程感兴趣吗？不是对成为计算机工程师感兴趣吗？那就读这个领域的原版书好了。这样的时候，你的焦点并不在于英语本，而是在于那语言文字背后的思想，这样的时候，你的大脑会很厉害，它自己会想办法穿透那层“毛玻璃”（英语），看到那玻璃背后的意义…… 不知不觉之间，那“毛玻璃”就会变成“透明玻璃” —— 就这么简单。&lt;/p&gt;

&lt;h3 id=&quot;7-刻意练习永远是必须的&quot;&gt;7. 刻意练习永远是必须的&lt;/h3&gt;

&lt;p&gt;每天都要挤出一点时间，把今天遇到过的生词复习几遍 —— 上学的时候不懂如何复习的人学习都不好，现在在成年阶段重新学习的时候，可别再吃这个亏了！而且，这个习惯是会“遗传”的：你的孩子若是看到你总是通过重复获得进步，他们也会自然而然地习惯于重复获得进步，这是真理。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;没！有！别！的！了！&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;任何正常人都可以上路了。如果还想让自己更心安一点，那就去读一本书《人人都能用英语》，其实只有一个字和一个感叹号：“用！”&lt;/p&gt;

&lt;p&gt;用吧用吧，不是罪。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;大多数人的平庸和愚蠢，其实都是当初自己选的&lt;/strong&gt; —— 这真是一个残酷的事实。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;任务&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;今天就彻底学会音标。&lt;/li&gt;
    &lt;li&gt;从明天早上就开始坚持朗读。&lt;/li&gt;
    &lt;li&gt;配置好自己的计算机以便随时查词典，请 Google Mac Dictionary 添加词典。&lt;/li&gt;
    &lt;li&gt;请 Google 新编英语阅读手册。&lt;/li&gt;
    &lt;li&gt;请 Google 人人都能用英语。&lt;/li&gt;
    &lt;li&gt;请 Google how to ask questions，第一个就是 Eric Steven Raymond 写的 &lt;a href=&quot;http://www.catb.org/esr/faqs/smart-questions.html&quot;&gt;How to ask questions the smart way&lt;/a&gt;，必须精读。另外，还有一篇 &lt;a href=&quot;https://hbr.org/2009/05/real-leaders-ask.html&quot;&gt;HBR 的文章&lt;/a&gt;，也要细看。&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 26 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/26/start-learn-en/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/26/start-learn-en/</guid>
        
        <category>精进</category>
        
        <category>转载</category>
        
        
      </item>
    
      <item>
        <title>「转载」你学你的，用不着别人批准 - 李笑来</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;转载自 &lt;a href=&quot;http://lixiaolai.com/2016/06/14/teach-yourself-without-permission/&quot;&gt;你学你的，用不着别人批准&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;有一句话是这么说的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;人类一思考，上帝就发笑。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我从来没搞懂这句话什么意思，什么目的，什么意义…… 也觉得并不重要。&lt;/p&gt;

&lt;p&gt;我倒是清楚地知道另外一件事儿：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;你一说要学什么东西，人们就发笑……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;说实话，我花了很多年才琢磨清楚他们为什么要笑，他们的思路，他们的结论，他们的未来和结局。琢磨清楚了之后，才觉得，这事儿的合理解释意义对我并不大，因为我不是他们，他们和我也没什么关系 —— 只不过是各自的道路有过一次交叉而已，现在各自早就身处不一样的世界了。&lt;/p&gt;

&lt;p&gt;有一件事绝大多数人搞错了，导致了不一样的思路，不一样的结论，不一样的未来和结局：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;学习这东西，不是一定要学到大师的程度才可以拿出来开始用的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;“学成归来”，是人们对大多数学习者的刻板印象，好像学不成就不要回来了似的。&lt;/p&gt;

&lt;p&gt;真实的学习过程是，学会一点最少必要知识（就是那些知道了之后就可以马上开始行动了的最少知识），然后就要马上开始实际操练…… 最终，大量的细节都是在实际操作过程中进一步学会的 —— 甚至，还有大量的细节如果不进行实际操练的话，就根本没机会学得到。&lt;/p&gt;

&lt;p&gt;在中国，每个会开车的人其实早就应该意识到这种学习方式的神奇。在中国，驾校的培训实在是太粗糙、太简单、太粗暴了…… 交了钱，进了驾校，其实前前后后在练习场上实际操作的时间少得可怜 —— 然后就冲出来上路了，虽然各自进度有些差异，但总体上来看，真正的驾驶技能几乎 100% 都来自于在真实世界里实际操作，而非驾校培训，不是吗？&lt;/p&gt;

&lt;p&gt;明明曾经靠着自己的勇气曾经学会过至少一项技能的人们，最终不知道为什么变成了另外一种人…… 真不明白为什么那么多小时候什么都学、什么都做不好却也根本没怕过的人们，长大了之后终究都成了怂货。而且怂到什么程度呢？怂到害怕别人不怂的地步……&lt;/p&gt;

&lt;p&gt;于是，绝大多数人的眼里，学习成了一条“漫长不归路” —— 听起来多可怕啊，学不成就别出来得瑟，学不成，就别回来见人！天呐。&lt;/p&gt;

&lt;p&gt;这还不算，既然在脑子里把学习这事儿类比为一条“漫长不归路”，那么“它一定是一步一步走过去的……”，于是，无论做什么事情，他们都感觉必须循序渐进，甚至，若是看到别人不循序渐进，就很生气。&lt;/p&gt;

&lt;p&gt;可是吧……&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;循序渐进坑了一代又一代的人……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其实，最有效的学习方式，真的不是从零开始，一路走到大师境地 —— 那条路上遍地尸骨訇然兽出。&lt;/p&gt;

&lt;p&gt;仔细观察一下我们的真实生活，我们从来都是这样的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;横空出世，向后钻研，向前突击……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这才是真实的世界。&lt;/p&gt;

&lt;p&gt;我们的教育体系，好像特别痴迷于把我们带到循序渐进的道路上去，父母们也觉得只有这样才放心（其实他们自己也是被弄脏了脑子自己不给自己洗脑的产物）…… 99% 的人循序渐进地从 ABCD 开始学，学英语 16 年，开口说不了，拿笔写不出…… 真不知道图个啥。&lt;/p&gt;

&lt;p&gt;最简单的编程，被抬高成“工程师”的境界 —— 可另外一个事实又明显地摆在那里：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;很多自称工程师的人，其实看到十四五岁的小黑客做的事情，也不得不心服口服 —— 若是必须、只能循序渐进才行的话，那些小黑客是不可能存在的，不是吗？&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;小黑客们都不是靠循序渐进习得技能的。都是“横空出世”的，他们最开始做的事情，不是打基础，而是“突然有个问题要解决”，于是不管三七二十一只好“向前突破”，用尽各种方法（通常是很土的办法）先把问题解决掉…… 在这个过程中，能补的补（向后钻研），补不上的就先放在那里，留给以后…… 然后反复迂回前进。&lt;/p&gt;

&lt;p&gt;前些日子，我发了这样一条 Tweet：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;算了一下，一个普通人只要不笨，一年是可以成长为全栈工程师的。用不着一万小时。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其实我不用猜就知道，一定会有大量的人明里暗里向我吐口水了 —— 事实上，我今年 45 岁，一路就是这么过来的，我一想学点什么，人们就发笑…… 他们的口水从来没能淹死我。&lt;/p&gt;

&lt;p&gt;我一个学会计专业的怕什么啊？我大学毕业出来搞的是销售，而不是会计，不也得现学现卖吗？做了那么久批发生意，后来跑去新东方教英语，不也是跌跌撞撞先去考托福吗？离开新东方之后开留学咨询公司，也得现学如何指导申请文书；再后来结果竟然闲着没事儿跑去学习 Ruby on Rails、后来搞出来个 KnewOne；在这过程中还闲着没事儿研究比特币，再后来还要学如何做创投；现在又没啥事儿干了，就准备认真研究一下计算机领域，从一个基础的地方开始，去搞定全栈技能（时代不一样了，十年前是没戏的）…… 我学我的，他们为啥那么看不惯？好奇怪…… 其实我倒也不奇怪，我知道他们的思路。&lt;/p&gt;

&lt;p&gt;这么多年来，在学习这事儿上，除了我的父母之外，真的从来没有其他人鼓励过我。我最感激我父母的方面，就是这么一条：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;只要我说买书、只要我说报班，我要多少钱，他们就给我多少钱 —— 虽然总是补上一句，“反正钱就这么一点点，你花在那里就不能花在别的地方了……”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;他们就是这样在我小时候用行动支持我的…… 再后来我自己能赚钱了，就成了我自己用行动支持我自己。&lt;/p&gt;

&lt;p&gt;来自于亲戚、朋友的鼓励呢？说实话，真的没有，完全没有 —— 当然，我的情况特殊，我并不需要别人鼓励 —— 我自我鼓励的能力超强。风凉话呢？那就太多了，认识的不认识的都想上来泼一瓢冷水 —— 现在回头看这些年，最幸福的事情就是我也不知道为啥竟然没有被他们恶心到，也没被他们吓倒，好像完全没事儿似的……&lt;/p&gt;

&lt;p&gt;所以，我这一辈子都有个好习惯：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;鼓励身边的所有人…… 只因为，我实在是太清楚“鼓励”这东西有多么稀缺了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;老罗当年跟后来的老婆处对象的时候，据他说几乎所有人都反对，只有我一个人说，“多好啊！你那么开心……” 西乔准备考雅思的时候，我天天说的只有一句话：“没那么难的，你就弄罢……” —— 我真的没有教她什么，反正她从零基础开始一年之后考了雅思四个七分而后留学霍炬陪读最终全家移民成功。当年高雅说，“我们老师都说我数学不行……” 我只不过回了一句“让他们都去屎” —— 她到美国本科就选了数学专业，研究生选了设计…… 还有另外一个小朋友叫魏天天，第一次托福，才 82 分，当时我正在上海出差，她给我打电话，电话通了之后嚎啕大哭，我说的只不过是“哭个屁，都这样的 —— 接着考！” 后来，她考了 108 分。&lt;/p&gt;

&lt;p&gt;如果你自己是个上进的人，那你就像我一样，天天鼓励那些同道中人罢 —— 我相信这绝对是善事。&lt;/p&gt;

&lt;p&gt;还有另外一个事实是很多人曲解的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;谁说学过之后用的不够熟练，就不能用了？！&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我说了个全栈工程师一年差不多了，很多人就愤怒了…… 对不起，我不是故意的。我用一两个月时间学会了，但用的不够好，部署到网上没多久就被人攻击了，甚至被“脱裤”了…… 这确实可以算作技艺不佳，可这碍着谁了呢？—— 哈哈，大家可能不知道，这事儿真的出现过，我当年学 ROR，用它写了个博客程序，然后就被“黑客”攻击了，删除了第一篇文章，然后留下几句话…… 他一定是觉得“这下我狠狠羞辱了李笑来一番”…… 偶尔挺想他的，不知道五年过去了，他现在怎么样？&lt;/p&gt;

&lt;p&gt;哦，对了，还有另外一个事儿：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;谁说没天分的人就不应该学东西了，谁说没天分的人学得不足够好就丢人了？&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我学过的几乎所有东西里，都没有“我有天分”的因素…… 这一方面是破令人沮丧的事实，另一方面又是勇气的来源。我最没天分的事情，可能就是唱歌。据说小时候唱歌很好听，后来有一次出去滑冰，重摔，然后脑震荡，然后就脑残了（这可是真的脑残），应该是负责辨音的部分受伤，直接的结果就是变得五音不全，没办法准确地分辨别人的音高，无法自如地控制自己的声音…… 上初中的时候，我爹给我买了一把吉他，说，“你唱歌都跑调，将来怎么学英语呀？” —— 一副“老爹只能帮到你这里了”的表情。许多年后，我弹琴自娱自乐，偶尔唱首“山丘”让同事们开心一下…… 他们很羡慕，却不知道那吉他对我来说，这么多年来，其实一直是“脑残治疗仪”…… 我做销售，也不是因为我擅长，而是当年会计没学好，所以找不到会计的工作（也有别的原因）；我去新东方教书，你真以为我英语有多好啊？只不过是考试成绩不错而已，发音那个烂啊…… 但发音烂就要被剥夺讲英语的权利吗？我不信。后来搞投资，你真以为我能点石成金啊？投了很多烂项目、死项目，花很多钱买了很多教训之后才开始慢慢摸到一点门道……&lt;/p&gt;

&lt;p&gt;而且，我心粗，没有生气恼火的基本素质。更邪门的是，我认识很多被骂得比我惨的人…… 比如王垠，比如罗永浩，比如和菜头，比如霍炬，并且，他们之间还可能对骂呢…… 偶尔好像来气了的时候，不小心不厚道地想到他们，我就又乐了…… 唉，咋整？&lt;/p&gt;

&lt;p&gt;有一天，我在朋友圈里发过这么一句话：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我找到了捷径，可惜早已身不在起点。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;真的有很多捷径…… 比如，现在这篇文章里很多话都是“捷径”，因为你想通了，这些“捷径”就会帮你节省很多很多时间，节省很多很多精力，了却很多很多烦恼，甚至抄很多很多近路…… 捷径，不就是用来节省时间、提高效率的吗？&lt;/p&gt;

&lt;p&gt;说这么多，其实就是想说这么个事儿：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我就是想带着一群人（当然总体上其实肯定是少数人），大幅度降低对学习的恐惧，大幅度压缩学而不用的时间，大幅度地跨界 —— 跨越那些貌似无法跨越的界限 —— 因为我们能活很多辈子，七年就是一辈子，你自己算算看？。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这一定让一些人感觉不舒服，但相信我，我们真的不是故意的…… 我们没想到会是这种情况…… 我们本来只是想自己过得更开心一点而已。大家尽量相互谅解罢。&lt;/p&gt;

&lt;p&gt;另外，这事儿需要补充：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我所说的、我所理解的全栈，究竟是什么没必要在语义上争论，但，在真正工程师的生活中，coding 应该基本上只占 20% —— 因为最终代码是用来表达思想的，用来解决问题的；所以，全栈工程师是那种有真正的问题需要解决，有真正有价值的想法需要实现，有品位的设计者、创造者。就好像我们都识字，都能写字，能写漂亮钢笔字的人也很多很多，可最终写好文章、写好教程、写好小说、写好诗歌的人才是“文字工程师”，剩下的都只是“识字而已”。&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 26 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/26/learn-yourself/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/26/learn-yourself/</guid>
        
        <category>精进</category>
        
        <category>转载</category>
        
        
      </item>
    
      <item>
        <title>「转载」《人人都是工程师》前言 - 李笑来</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;转载自 &lt;a href=&quot;http://lixiaolai.com/2016/06/12/makecs-preface/&quot;&gt;《人人都是工程师》前言&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1-为什么选择程序设计作为这本书的主题&quot;&gt;1. 为什么选择程序设计作为这本书的主题？&lt;/h3&gt;

&lt;p&gt;也许是因为我必然不由自主地暗藏私货，因为我一直固执地认为，不管有多少人相信：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(0) 在中国，对绝大多数人来说，&lt;code class=&quot;highlighter-rouge&quot;&gt;English + Computer Skills = Freedom&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;不过，以下理由可能更为充分：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(1) 程序设计也许是目前地球上最容易变现、最被高估、可事实上却实际上并不难以获得的技能。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;从趋势上来看，不仅目前如此，将来还会如此，并且变现容易程度与高估的幅度都会被进一步拉升 —— 不信咱就找个代驾开车坐在后座看唱本走着瞧。&lt;/p&gt;

&lt;p&gt;还有个理由是，&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(2) 程序设计的学习难度被有意无意地过分高估了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;人们向来有把学不会的技能神秘化的倾向，也许是因为只有这样心里才舒服，觉得自己学不会正常一点。但，程序设计这个领域，实在是被过份高估了（其程度比第二语言习得领域还要高出许多许多），乃至于很多人只是因为被误导了才望而却步，根本不是做不了做不好的原因。这个领域里的每一项技能，都会让习得者有这样的慨叹，“这样简单的东西竟然这么有用！” 或者 “连这么简单的东西我都没学会的话，实在是太可惜了！”&lt;/p&gt;

&lt;p&gt;最后一个理由是，&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;(3) 这是个最能全方面养成、锻炼、提升个人学习能力的学习项目。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;在计算机这个领域的顶尖范围里，集聚着人类的精英，他们设计了一个又一个的方法论去优化自己的工作环境，优化自己的工作流程，优化自己的产品，没完没了地改善，没完没了地更迭…… 也就是说，在计算机这个领域里，有大量的概念与方法论都是走在最前沿的。学习程序设计，并不是肤浅地学一门编程语言，设计一些函数，更重要、更本质的是学习计算机科学家们用来改变世界的思考方式、行为模式。&lt;/p&gt;

&lt;h3 id=&quot;2-这本书可能涉及的话题&quot;&gt;2. 这本书可能涉及的话题&lt;/h3&gt;

&lt;p&gt;这真是个神奇的时代。跟过去不一样了，现在很可能已经是“一门语言打天下”的时代了，学一门 javascript，就有可能什么都做了…… 这在哪怕仅仅是三五年前都是不可能的事情。不过，我们涉及的话题可能很多很多 —— 总而言之，前面有一条路通往“全栈工程师”的方向……&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;HTML, CSS, JAVASCRIPT&lt;/li&gt;
    &lt;li&gt;PUG, LESS, COFFEESCRIPT&lt;/li&gt;
    &lt;li&gt;MONGODB, RETHINKDB&lt;/li&gt;
    &lt;li&gt;NODEJS, EXPRESSJS&lt;/li&gt;
    &lt;li&gt;REACT, VUE, ANGULAR&lt;/li&gt;
    &lt;li&gt;RELUX&lt;/li&gt;
    &lt;li&gt;ELECTRON&lt;/li&gt;
    &lt;li&gt;TDD…&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;反正没有什么是不能学的……&lt;/p&gt;

&lt;h3 id=&quot;3-如何自学才能真正有效&quot;&gt;3. 如何自学才能真正有效？&lt;/h3&gt;

&lt;p&gt;学习是一种生活方式，是少数人的生活方式 —— 虽然它原本是每一个人最初的生活方式。哪儿有小朋友不学习的？他们每天都在学习（不要把学习狭隘地理解为上学、读书），可基于种种原因，绝大多数人从某一时刻开始就厌倦了学习（很可能是把学习与上学等同起来造成的），甚至干脆放弃了学习（以为离开学校就再也不用学习了）……&lt;/p&gt;

&lt;p&gt;另外一些人，不太一样，尽管他们是少数。他们甚至不认为学习只是生活内容之一，而干脆是生活方式。因为不学习的生活只能是停滞不前的，所以缺少了新鲜，缺少了刺激，由此也缺少了许许多多的乐趣。生活方式决定了生活质量，这是最基本的逻辑。&lt;/p&gt;

&lt;p&gt;再进一步，既然学习是一种他们已经选择了的生活方式，所谓的“终生学习”只是必然的结果，对他们来说并不需要“大力提倡”，他们也不需要“努力”、“坚持”、“不屈不挠”、“头悬梁锥刺股”…… 他们只是那样活着，每天进步一点点地活着，没有最好，只有更好，不需要成功，只需要不断成长。&lt;/p&gt;

&lt;h4 id=&quot;31-自学其实是一种社交活动&quot;&gt;3.1. 自学其实是一种社交活动&lt;/h4&gt;

&lt;p&gt;很多人错误地认为所谓的“自学”，就是“自己一个人（默默地）学” —— 这恰恰是绝大多数人一生学习失败的最根本原因。很多人从来没反应过来：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;学习从来都不是单独孤立的行为，而是社交行为。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;生活中，你遇到过这样的现象没有：“看见别人打针，自己先疼得受不了……” 这是因为我们的大脑中有一种神经元，叫做“镜像神经元”（Mirror Neuron），它会让我们“感同身受”，当我们看到另外一个人正在做什么的时候，镜像神经元会尽力给我们足够的刺激，让我们“体验”那个人的感受。以前人们不知道为什么喷嚏竟然会“传染”，现在科学家们很清楚了 —— 那就是镜像神经元在起作用。&lt;/p&gt;

&lt;p&gt;镜像神经元的存在，使得我们有模仿能力、有通感能力、有同情心、有同理心…… 这也是为什么人类天然有社交需求的重要原因，因为我们的大脑皮层上都有很多的镜像神经元。&lt;/p&gt;

&lt;p&gt;一般来说，物品、书籍之类非人的东西，都不大可能激活镜像神经元。只有看到人的时候，镜像神经元才会被激发。所以，你送给小朋友一把吉他，他不会有什么兴趣的。可若是你在弹琴的时候被他看见，他的镜像神经元就会因为你的行为而被出发，进而对弹奏吉他感兴趣 —— 注意，不是对吉他本身感兴趣。若是你在弹琴的时候，带着某种能够打动他的情绪，那他更容易被影响，因为情绪更能激发镜像神经元。也就是说，一切的学习起初都基于模仿，一切的模仿，都源自于看到真人的行为 —— 哪怕是在电影里看到，虽然其实只不过是影相而已，并非真人，但毕竟是真人的影相。&lt;/p&gt;

&lt;p&gt;所以，无论学什么技能，都要找到用那种技能的人，这样我们的镜像神经元才可能更容易被激发，学习效果才会好。若是能找到热爱那项技能，乃至于一使用那项技能就很开心（最好的情绪之一）的人，那就更好了。激情这东西，是少数幸运儿才长期持有的东西，大多数人小时候挺多，过了十五六岁之后就开始有意无意磨灭了激情，且并不自知。&lt;/p&gt;

&lt;p&gt;之前提到，&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;当我们看到另外一个人正在做什么的时候，镜像神经元会尽力给我们足够的刺激，让我们“体验”那个人的感受。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这句话里有个词很重要，“尽力”。因为镜像神经元只能调用我们大脑里已有的信息去模拟对方的感受，所以，它最多也就是“尽力”，无法做到“确保正确”。今天的糖尿病患者使用的皮下注射针头，已经可以做到很细，细到让使用者“无感”的地步，所以，当一个糖尿病患者给自己注射胰岛素的时候，他自己并不觉得疼，可是看的人却能“疼”到紧皱眉头的地步，为什么？因为旁观者的大脑力没有实际用那么细的针头注射胰岛素的经验，所以镜像神经元在旁观者“感同身受”时所调用的，其实是过往旁观者自己打针的体验 —— 被很粗的针头做静脉注射的痛苦体验。&lt;/p&gt;

&lt;p&gt;所以，很多人误以为他们眼里的成功者靠的是“坚持”、靠的是“毅力”，这完全是自己的镜像神经元“尽力”的结果，是“调用自己过往经验去‘感同身受’的结果”…… 事实上呢？那些“成功者”其实并不在意成功，因为到死之前成长不应该也不可能结束，因为那是他们的生活方式，学习、进步、探索、迂回，甚至折腾、挫败和迷茫，都是他们生活中必不可少的内容，这是最初不自觉的选择，谈不上什么“坚持”，谈不上什么“毅力”…… 说实话，对他们来说，不让折腾才真痛苦呢，不学习才需要坚持和毅力呢！&lt;/p&gt;

&lt;p&gt;再进一步，这也是为什么要选择朋友的原因。人与人之间有很大的差异，最大的差异来自于性格养成，大多数人会沦为表现型人格，只有少数人才会在不断调整中保持、呵护、进一步培养“进取型”人格。他们自然而然地更为乐观，更有耐心，更有承受力，更有战斗力，更能生产与体验学习与进步的乐趣。与这样的人在一起，学习会更容易 —— 只因为镜像神经元会更容易地被正确激发。说清楚了，道理其实挺简单的。&lt;/p&gt;

&lt;h4 id=&quot;32-刻意练习是必须自己完成的核心&quot;&gt;3.2. 刻意练习是必须自己完成的核心&lt;/h4&gt;

&lt;p&gt;有个很简单的诀窍：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;重复才能练就技艺。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;但不知道为什么，绝大多数人就是不信这事儿，尽管大多数人小时候一定读过那个寓意深刻的教育故事：《卖油翁》—— 每个人都记得那里面的金句：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;无它，手熟尔。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这时间绝大多数的“精湛技艺”，到最后跟那个神秘的概念“智商”没有任何关系。智商是存在的，但它不是与生俱来一成不变的，所谓的智商，其实是一个人最终积累出来的知识经验的总和 —— 若是这样理解的话，就不难理解为什么到最后人与人之间的聪明程度相差天壤。因为有一些人天天往前走啊，另外一些人早就不动了啊！&lt;/p&gt;

&lt;p&gt;所谓的刻意练习，说来也很简单，就是把那些现在做起来生疏的技能通过反复使用最终做到不假思索就可以做完且做好 —— 这与智商高低全无关系。&lt;/p&gt;

&lt;p&gt;现在大多数人都会开车。谁在刚开车的时候不生疏呢？一个方向盘都弄不明白，这会儿转多了，那会儿转少了…… 可是，没有多久（绝对用不着一万小时，一百小时都用不上）之后，那方向盘就好像已经是自己身体的一部分一样，就好像已经长在自己的手上了一样，听话起来，不假思索的情况下就可以做到转动的幅度刚刚好…… 车上油门，刹车，也是一样，没多久，就好像长在脚上一样，就好像是自己身体的一部分一样，随心所欲地被我们控制（其实是“随脑所欲”）。&lt;/p&gt;

&lt;p&gt;我们的大脑就是这样的，有强大的能力把我们常用的物体、技能“吸收”进来，就好像那些东西是我们身体的一部分一样，进而随心所欲地控制。厨艺大师手中的刀子，MBA 明星手中的篮球，都是这样的，虽然看起来是“身外之物”，实际上，对他们的大脑来说，那些东西都是他们身体的一部分，是他们可以随心所欲地控制的 —— 当然，外人看来那实在是太神奇了！&lt;/p&gt;

&lt;p&gt;每个人都有过这样的体验。你见过小朋友刚开始拿笔写字有多么笨拙吧？你自己最初的时候也那样，这是跑不了的。可仅仅是几天之后，你就已经可以自如地控制那“身外之物”了，不说写得好看不好看，起码已经能一笔一划地写了。这一代人从小就使用键盘，要知道在上一代人身上，键盘可是“神奇的计算机”的一部分，是“高档电器”的组成部分，学起来可费劲了，要专门上一个“打字培训班”…… 也不一定学的会。甚至最终相当数量的人放弃了，或者连试都不愿意试，更有甚者干脆“理直气壮”声称“用那玩意写字没感觉！”，这还不够，要写文章发表在报纸上，理论只用笔而绝对不用键盘的必要 —— 真的没感觉吗？没感觉真的那么重要吗？他们有的明显是错误的感觉啊！等那些人都死光了，那些“感觉”就再也没有人提起了。这一代人最明显的变化就是，互联网已经长在自己身上了，互联网不再是一个只有坐在桌上的台式机面前才有的一个存在。天天用天天用的结果是什么？绝大多数动作都已经化作大脑皮层表面的沟回，不再需要通过思考、检索才能产生正确的行动，而是下意识中已经做完，已经做好…… 这一代的孩子们不仅随脑所欲地使用键盘，甚至可以随脑所欲地使用虚拟键盘，哼。&lt;/p&gt;

&lt;p&gt;所以，一切看起来复杂的技艺，其实都并不难，很多人最终学不会，其实只是练不成，就是说，他们并不是不理解那道理、那原理；可理解本身并无太大用处，因为真正需要做的是通过大量的重复与实践，把那道理、那原理转化为大脑皮层表面的沟回…… 缺少了刻意训练的环节，学什么都是白搭。&lt;/p&gt;

&lt;p&gt;关键来了：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;刻意练习，必须自己完成。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;没有人帮你完成，更为重要的是，没有人有义务监督你完成 —— 除非你付钱给人家监督你。但现实中出钱请人监督自己的做法总是不太成功，因为 a) 钱出的不够高，所以请不来真正负责的人；b) 钱出的足够高，吸引来的只能是唯唯诺诺的人，不敢下手太狠…… 你看，不是没有人试过，只是试过之后发现没用而已。&lt;/p&gt;

&lt;h4 id=&quot;33-即便环境足够好也依然要靠自己&quot;&gt;3.3. 即便环境足够好也依然要靠自己&lt;/h4&gt;

&lt;p&gt;很多事情只能靠自己。学习就是吃饭，正如饭这东西没办法让别人替自己吃了一样，学习只能自己学，刻意练习只能自己练，谁都帮不上，谁都指望不上。这就是绝大多数人自学失败的最根本原因。&lt;/p&gt;

&lt;p&gt;然而，在一个恰当的环境里，在一个恰当的社交圈里，情况可能非常不同。若是你在一个表现型人格占大多数的圈子里生存，你做得好会招致嫉妒甚至陷害，你做得差会被嘲弄甚至捉弄；反过来，你若是在一个进去型人格占大多数的圈子里生存，情况会反过来，你做得好，大家会佩服你，然后模仿你，向你学习，或直接向你请教，或默默揣摩；要是你做的不好，没有人会鄙视你，没有人会捉弄你，相反会鼓励你，告诉你说大家刚开始都是这样的，看到你做的不恰当的地方，他们会告诉你，若是如此这般你也许就可能好起来…… 然而，即便是在进取型人格占大多数的社交圈里，一切的改变也都来自于自己的刻意练习，用时间浇灌的践行，才能引发真正的改变与进步。&lt;/p&gt;

&lt;p&gt;这与有一部分健身者选择去健身房锻炼也是一样的道理。&lt;/p&gt;

&lt;p&gt;难道就不能在家、在操场健身吗？能啊。去健身房锻炼就能自动长出一身腱子肉，自动甩掉一肚子肥膘吗？明显不能啊！你交了四千八百块的年费，到年底一算，单次消费八百元，因为一年下来你只去了六次…… 你会找健身房退款吗？不会的 —— 至于为什么，你可能没细想过：因为从另外一个角度来看，一年交四千八百元，是你和健身房的约定；至于去多少次，实际上是你自己与自己的约定，违约者是你自己，被约为者还是你自己，非要退费的话，你得找你自己退费……&lt;/p&gt;

&lt;p&gt;但你若是去了健身房，并且还能持续频繁地去健身房锻炼，你的身材就是会变的，而且变化还会非常大，那可是一整年啊！事实上，三个月下来，总计一百小时左右，就会发生巨大的无法忽视的变化。&lt;strong&gt;对，仅仅一百小时，在绝大多数领域里，就足矣把绝大多数人甩在身后&lt;/strong&gt; —— 对一些人来说这个事实可能是解脱；对更多另人来说，这个事实其实非常残酷，因为仅仅一百个小时，他们就已经败下阵来，别说一辈子了，别说七年就是一辈子了，他们在生生世世中，第一百个小时之前就已经死去。&lt;/p&gt;

&lt;h3 id=&quot;4-概念与方法论最少必要知识&quot;&gt;4. 概念与方法论：最少必要知识&lt;/h3&gt;

&lt;p&gt;无论学什么，都要想尽一切办法（读书、搜索）尽快获得“最少必要知识”。什么是“最少必要知识”呢？所谓“最少必要知识”，指的是为了能够实践某项技能，最起码要学会的那一点知识。&lt;/p&gt;

&lt;p&gt;我为了这个概念还专门杜撰了一个英文缩写，MAKE —— Minimal Actionable Knoweldge &amp;amp; Experience。注意这里的一个词：Actionable，“可行动的/可执行的”。&lt;/p&gt;

&lt;p&gt;比如，开车的最少必要知识是什么呢？&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;学会如何启动&lt;/li&gt;
    &lt;li&gt;学会如何制动&lt;/li&gt;
    &lt;li&gt;再加上一个字：慢&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;但，开车开得不好可能会影响别人的生命安全，所以得先去考个驾照…… 可大多数知识与技能并不会直接危及他人的生命安全，不是吗？你英语发音不漂亮，人家并不会因为这个就直接死掉；你写字写得不够帅气，但这并不意味着说你没有写字的权利；你 PPT 做得不好看，但这并不意味着说你不可能逻辑严谨地论证你的观点…… 有一本书特别好，好到什么程度呢？仅仅看书名就已经热血沸腾了，这本书叫：&lt;em&gt;Without Permission&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;学习编程的最少必要知识是什么呢？&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;你得习得几个程序员都应该有的起步方法论。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;…… 然后呢？然后你就可以开始边学习，边实践，在学习中实践，在实践中学习更多，虽然有时掉进陷阱，有时误入歧途，但，请你放心，肯定不会死人的。是谓不断进步，是谓 “路漫漫其修远兮，吾将上下而求索”。&lt;/p&gt;

&lt;h4 id=&quot;41-只使用-google&quot;&gt;4.1 只使用 Google&lt;/h4&gt;

&lt;p&gt;不论你遇到什么困难，都可以去问 Google，这是目前地球上最大的“人工智能”项目。它聪明到什么程度呢？聪明到你甚至可以问它：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;How to use google effectively?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这是第一个小任务：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;了解一下在 Google 搜索的时候，＋、－、*、”、~ 这些符号的用法……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;只要花上一小点时间，了解了这些符号的用法，那么，&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;你已经比地球上的 90% 以上的人更善于使用这个最伟大的人工智能项目了；（甚至，90% 这个数字都有点保守？）&lt;/li&gt;
    &lt;li&gt;你已经入门了，最起码你已经知道跟计算机打交道的时候，其实就是综合使用用&lt;/li&gt;
    &lt;li&gt;各种各样的符号而已…… 哪怕一个字符错了，可能结果都很不一样 —— 其实好像小学数学也是如此罢？&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;既然你准备当工程师，那么，在使用 Google 的时候，除了那些常用的符号之外，还需要常用以下几个关键字：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;tutorial&lt;/li&gt;
    &lt;li&gt;example&lt;/li&gt;
    &lt;li&gt;tricks&lt;/li&gt;
    &lt;li&gt;cheatsheet&lt;/li&gt;
    &lt;li&gt;cookbook&lt;/li&gt;
    &lt;li&gt;awesome&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;以后在你想学任何语言或者专题的时候，比如 javascript，那你就 Google 这个这些组合：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;javascript cheatsheet&lt;/li&gt;
    &lt;li&gt;javascript cookbook&lt;/li&gt;
    &lt;li&gt;javascript awesome&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;放心，你自己一定会上瘾的，用不着别人督促你……&lt;/p&gt;

&lt;h4 id=&quot;42-在中国你最好买一个-vpn-服务&quot;&gt;4.2 在中国，你最好买一个 VPN 服务&lt;/h4&gt;

&lt;p&gt;别问我 VPN 是什么，我们有个原则：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;一切能问 Google 的，都不要去问人。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这个习惯最初的时候看起来麻烦，可一旦养成，就知道它会帮你节省多少时间，它会让你有多大进步…… 甚至，这个原则还会让你识别哪些人真的值得交流 —— 神奇吗？&lt;/p&gt;

&lt;p&gt;别浪费时间去寻找免费资源，能买就抓紧时间买 —— 我的意思是你必须马上买一个。这是另外一个原则：一切能节省时间的服务都值得购买，因为时间才是最宝贵、最稀缺，压根无法再生的资源，跟时间比，钱算个屁。&lt;/p&gt;

&lt;h4 id=&quot;43-只读英文文档&quot;&gt;4.3 只读英文文档&lt;/h4&gt;

&lt;p&gt;这又是很重要很重要的原则：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;在计算机方面，只读英文文档。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;你可能已经打退堂鼓了…… 别怕。&lt;strong&gt;我有办法让你最多三个月就彻底解脱&lt;/strong&gt; —— 详见&lt;a href=&quot;/2019/03/26/start-learn-en/&quot;&gt;十分钟后开始使用英语&lt;/a&gt;。当然，你要是连这三个月都抗不过去，你就认了罢，选择平庸的生活去罢 —— 这个世界正在变得越来越好，在一个更好的世界里，最明显的好处就是，哪怕是笨蛋，哪怕是不进步的笨蛋，也不至于饿死。&lt;/p&gt;

&lt;p&gt;在硅谷，印度人很多很多。为什么呢？他们虽然口音浓重，但英语对他们来说基本上是母语。中国人相对吃亏一点，为什么？英语相对较差。&lt;/p&gt;

&lt;p&gt;在国内，一个程序员的水平怎么样，基本只取决于一件事儿：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;英语水平&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;也许你会因此惊讶，但若是你有机会去问任何一个 IT 公司的 CTO，无论是哪一个，都一定会百分之百认同这个观点 —— 这干脆就是事实。外界并不清楚这事儿而已。我总是开玩笑说（其实只不过是事实陈述），“那些在国内学英语专业的人本科毕业去当老师或者靠研究生，真不如脱产学一年计算机呢，拿着这个优势，一下子就干掉国内 90% 的所谓程序员，年薪 60 万人民币，其实指日可待…… 尤其是那些英语系的女生，一脚踏进码农的世界，瞬间就是女神中的女神。”&lt;/p&gt;

&lt;p&gt;提高英语的最直接、最有效方式，就是从此在某个领域坚决只使用英语 —— 平时，一般人还真的很难有这个环境呢！现在机会来了，你想学习，你想学习计算机，你想成为一个工程师，你就要从今天开始在计算机领域里，只读英文文档。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;说实话，我恨不得将这本书直接写成英文版…… 可是为了普度众生，只能委屈自己，也只能委屈各位，还在写中文。&lt;strong&gt;不过，我真心希望这是你读的与计算机相关的最后一本中文书！&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这个原则要恪守，要执拗地恪守，要不屈不挠地恪守。给你看个例子，这个例子很重要，乃至于我们一提到学习、一提到进步，一定反复会提及这个例子（最早这是我在《人人都能用英语》里提到的例子，其后一直反复使用）：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;请读者猜猜下图中，这个正在美国 UAB 康复中心治疗的小女孩受伤的是左臂还是右臂？&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;其实她的左臂没有受伤，而之所以把左臂固定起来就是因为那是一条没有受伤的手臂，而右臂才是受伤、需要通过训练恢复的……咦？这是怎么回事儿？可是从生理上来看，大脑受损的部分是没办法恢复的，她又怎么能通过训练来让已经受伤的右臂恢复正常呢？&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;/assets/img/posts/2019-03-26-everyone-engineer/1.jpg&quot;&gt;&lt;img src=&quot;/assets/img/posts/2019-03-26-everyone-engineer/1.jpg&quot; alt=&quot;1.jpg&quot; title=&quot;点击查看原图&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;大脑的神奇之处在于它可以利用其它未受损的部分重新习得受损部分的功能（学术上叫做“ remap ”、“ reroute ”、或者“ rewire ”）。之所以要把行动自如的左臂绑起来，是因为如果不这么做的话，面对任何需求，大脑中负责控制左臂的部分（或称为“左臂脑图”）都会“优先启动”；因为这部分是未受损的，而原本控制右臂的部分已经受损了。换言之，这时，大脑中尚不存在一个能够控制右臂的部分。而把左臂固定住之后，尽管负责控制左臂的大脑部分依然“优先启动”，但实际上却无法自如操纵左臂。而在这种情况下，就可以通过让大脑的其他部分慢慢专注于右臂，进而习得控制右臂的方法——即，可以通过这样的训练，慢慢使大脑未受损的某个区域“习得”原本只有那个已经受损的区域所负责的功能。没有多久，这个女孩子的右臂就恢复了，活动起来与原来没什么两样。可是她的大脑不再是原来的样子了，尽管某一部分受损且不可恢复，但她大脑的另外一个区域已经被开发，能够别无二致地完成受损区域曾经可以完成的功能。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;仅仅在 2004 年之前，这种疗法是完全不可想象的。这种最初看起来匪夷所思的疗法叫做“ CI 活动疗法”（Constraint-Induced Movement Therapy，简称“ CI ”或者“ CIMT ”）的发明者是 Edward Taub 教授。今天，这种疗法渐渐开始在全世界范围内普及，帮助无数偏瘫患者找回原来的自我和生活。可是 Taub 教授的研究经历却一波三折。为了找到偏瘫的治疗方案，他需要人为地使猴子偏瘫（故意破坏猴子大脑的某个区域），而后再想办法通过训练令那些猴子从偏瘫状态中恢复过来……上个世纪八十年代初，他被一个动物权益保护组织告上法庭，导致实验室被关闭，经费被冻结，最后甚至失去了工作，几乎所有的人都对他避之唯恐不及。接下来的六年时间里，Taub 教授的所有时间精力都被耗费在为自己辩护上——巨大的社会压力使得他甚至找不到愿意为他辩护的律师，所以他只好自己做自己的律师。案发之前，Taub 教授总计有大约 10 万美元的存款，到他最终胜诉洗清所有罪名之时，他只剩下了大约四千美元的积蓄。当然，时至今日，基于他的理论及其实践为人类创造的巨大价值，Taub教授被公认为当今全球最杰出的科学家之一。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;http://zhibimo.com/read/xiaolai/everyone-can-use-english/chapter1.html&quot;&gt;http://zhibimo.com/read/xiaolai/everyone-can-use-english/chapter1.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;触类旁通地想想吧，如果不把你的中文使用能力锁起来，那么在这个领域里，你的英文使用能力就一定不能发展起来 —— 就犹如上面那个小女孩的左臂没有被绑起来一样，直接导致右臂永远没有办法恢复 —— 因为大脑会走捷径，于是那一部分功能永远不可能被大脑的另外一部分学会。所以啊，还是那句话：“都已经给你说清楚了，你自己选。”&lt;/p&gt;

&lt;p&gt;是不是最终会感觉这岂不是“所有人都应该使用的方法论吗？” 是啊，早就说过了：&lt;/p&gt;

&lt;p&gt;本来人人都是工程师，只不过很多人明里暗里自己放弃了而已。&lt;/p&gt;

&lt;h3 id=&quot;5-天天给自己洗脑&quot;&gt;5. 天天给自己洗脑&lt;/h3&gt;

&lt;p&gt;我们天天刷牙、洗手、洗脚、洗澡…… 我们却从来不洗脑，这岂不是咄咄怪事？&lt;/p&gt;

&lt;p&gt;在我看来，不给自己洗脑是最差的个人卫生习惯。更要命的是，很多人其实也洗脑 —— 只不过，从来不是自己给自己洗脑，而是永生永世被别人洗脑…… 这是最可怜的生活状态。&lt;/p&gt;

&lt;p&gt;晚上睡觉前，你洗澡、洗脚；早上起来，你洗脸、刷牙，然后出门。外面有风，所以有风尘，外面可能下雨，所以有泥浆，你可能要上厕所，所以想来有很多细菌，你自己做很多事情，弄不好也大汗淋漓…… 你就会觉得各种不干净，然后你怎么办？洗。不仅要洗，还要搭配各种工具，香皂、洗发露、沐浴液……&lt;/p&gt;

&lt;p&gt;一旦你开始学什么东西，你一定饱受各种打击 —— 那些不愿意学习的人，其实不仅害怕自己学不会，他们更怕的是别人竟然学得会，所以他们会提前出手，打击一切可能让自己收到打击的人或事。他们会嘲笑你（越差的人越鄙视别人），他们会泼冷水（恨不得泼的是开水），他们会鄙视你（不是靠资格，是靠自以为是），他们会疏远你（以为这样可以让你害怕）…… 更可恨的是，他们人数众多，比例上占据一定的优势。&lt;/p&gt;

&lt;p&gt;于是，你的脑子就不干净了，被他们污染了…… 怎么办？自己给自己洗干净 —— 对，就这么简单。&lt;/p&gt;

&lt;p&gt;2009 年，有一个小女孩，名字叫高雅，背着个包从大连坐火车来北京找我，说要学 TOEFL，要到国外读大学。我就给她安排了课程，她很努力，几次下来，从最初的 62 分，考到了最终的 102 分（满分 120 分）。去美国之前，她问我到了美国该学什么专业，我告诉他，本科就是学基础学科的，比如数学。她当时脱口而出：“我从小就数学不好……” 我颇不耐烦，因为我向来讨厌 “我从小 …… 就不好” 这个句型（有一类句型，是脑子被污染了的人才频繁使用的），于是就直接厉声顶了回去：“谁说的！” 我本来说的是感叹号，她却理解成了问号，声音低了好几度，头也不由自主地低了下来：“我们学校老师说的，好几个老师都这么说……” 我愣了一下，却没有软了语气，直接回了过去：“让他们都去屎！” —— 我故意用了卷舌音。&lt;/p&gt;

&lt;p&gt;后来呢？后来她去了美国，在华盛顿大学读本科，她本科读的是什么专业呢？数学。再后来在卡耐基梅隆读研究生，研究生读的是什么专业呢？设计。现在在硅谷工作。&lt;/p&gt;

&lt;p&gt;我想，我当时那一句斩钉截铁的 “让他们都去屎！”，也许是她第一次被洗脑，被洗干净，从那个脏兮兮的状态下清爽地走出来……&lt;/p&gt;

&lt;p&gt;我知道如果你告诉身边的人，你要学计算机了，你要把自己当作工程师了，那他们的反应几乎是我可以栩栩如生地想象出来的。虽然你没必要说出来那句话（“让他们去屎！”），但你自己要知道，他们的反应就跟屋外的灰尘细菌一样，是必然存在的，无法回避的，只不过，你应该回家跟洗手洗澡一样，给自己洗洗脑 —— 请务必注意个人卫生！&lt;/p&gt;

&lt;p&gt;我们每天都要给自己洗脑。可这并不是我发明的习惯啊！孔老夫子说，“吾日三省吾身”，你看看他老人家个人卫生习惯多好，不仅洗，还要天天洗，而且还是每天要给自己洗脑至少三次……&lt;/p&gt;

&lt;p&gt;以下这几句话，天天都要读给自己听，天天都要把它们当作香皂用来给自己洗脑，一遍不够就洗好几遍：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;学习其实是一种生活方式，学习本身就是最好的洗脑方式。&lt;/li&gt;
  &lt;li&gt;只要我投入时间精力，长期来看，没有什么是我学不会的。&lt;/li&gt;
  &lt;li&gt;我学会的东西越多，我再学新的东西就只能越来越快。&lt;/li&gt;
  &lt;li&gt;学习不是目的，用起来才是真的，因为价值只能通过创造去实现。&lt;/li&gt;
  &lt;li&gt;我知道我现在看起来很笨拙，但刚开始谁都是这样的，实践多了，就自然了，就自然地好起来了。&lt;/li&gt;
  &lt;li&gt;在学习这件事儿上，他们不理解我是正常的，这方面我也不需要理解，因为我是一个独立的人。&lt;/li&gt;
  &lt;li&gt;我不应该与他们争辩，因为我不想伤害他们；我也不应该被他们影响，因为我不想伤害自己。&lt;/li&gt;
  &lt;li&gt;刻意练习永远是必要的，虽然它通常并不舒适，但它的复利效应确实巨大的。&lt;/li&gt;
  &lt;li&gt;哪怕是为了下一代，我也要通过现在的努力成为学习专家，这样才有资格与我的孩子共同成长……&lt;/li&gt;
  &lt;li&gt;我的路还很长，我要健康，我要干净，尤其是我的脑子更要干净。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;其实，这完全是“进取型人格宣言”，不是吗？&lt;/p&gt;

&lt;p&gt;在接下来的过程中，我们会不停地建立更多的原则。所谓的原则，就是一定要恪守的形式准则，如果不能恪守，就不能称之为原则。做个有原则的人，是很重要的原则。另外，有一本好书，就叫《原则》，一定要找时间研读。&lt;/p&gt;

&lt;h3 id=&quot;任务&quot;&gt;任务&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;真正学会如何使用 Google&lt;/li&gt;
    &lt;li&gt;用 Google 找到一个可购买的稳定的 VPN&lt;/li&gt;
    &lt;li&gt;把“进取型人格宣言”背下来&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 26 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/26/everyone-engineer/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/26/everyone-engineer/</guid>
        
        <category>精进</category>
        
        <category>转载</category>
        
        
      </item>
    
      <item>
        <title>「Swoole」Process 进程</title>
        <description>&lt;h3 id=&quot;接口&quot;&gt;接口&lt;/h3&gt;

&lt;h5 id=&quot;构造-__construct&quot;&gt;构造 __construct&lt;/h5&gt;

&lt;p&gt;创建子进程&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callable&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$redirect_stdin_stdout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pipe_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$enable_coroutine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$function&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;子进程创建成功后要执行的函数，底层会自动将函数保存到对象的&lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;属性上。如果希望更改执行的函数，可赋值新的函数到对象的&lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;属性&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$redirect_stdin_stdout&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;重定向子进程的标准输入和输出。启用此选项后，在子进程内输出内容将不是打印屏幕，而是写入到主进程管道。读取键盘输入将变为从管道中读取数据。默认为阻塞读取。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$pipe_type&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;管道类型：&lt;br /&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;：不创建管道启用&lt;br /&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;：创建&lt;code class=&quot;highlighter-rouge&quot;&gt;SOCK_STREAM(TCP)&lt;/code&gt;类型管道&lt;br /&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;：创建&lt;code class=&quot;highlighter-rouge&quot;&gt;SOCK_DGRAM(UDP)&lt;/code&gt;类型管道&lt;br /&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$redirect_stdin_stdout&lt;/code&gt;后，此选项将忽略用户参数，强制为&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;。如果子进程内没有进程间通信，可以设置为&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$enable_coroutine&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;默认为&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，在&lt;code class=&quot;highlighter-rouge&quot;&gt;callback function&lt;/code&gt;中启用协程，开启后可以直接在子进程的函数中使用协程&lt;code class=&quot;highlighter-rouge&quot;&gt;API&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;未完待续！&lt;/p&gt;
</description>
        <pubDate>Mon, 25 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/25/swoole-process/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/25/swoole-process/</guid>
        
        <category>php</category>
        
        
      </item>
    
      <item>
        <title>linux 信号字典</title>
        <description>&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;信号&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;值&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;处理动作&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;发出信号的原因&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGHUP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;终端挂起或者控制进程终止&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGINT&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;键盘中断（如break键被按下）&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGQUIT&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;键盘的退出键被按下&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGILL&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;非法指令&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGABRT&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;由abort(3)发出的退出指令&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGFPE&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;浮点异常&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGKILL&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;9&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;AEF&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Kill信号&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGSEGV&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;11&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;无效的内存引用&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGPIPE&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;13&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;管道破裂: 写一个没有读端口的管道&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGALRM&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;由alarm(2)发出的信号&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGTERM&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;15&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;终止信号&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGUSR1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;30,10,16&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;用户自定义信号1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGUSR2&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;31,12,17&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;用户自定义信号2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGCHLD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;20,17,18&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;B&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;子进程结束信号&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGCONT&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;19,18,25&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;进程继续（曾被停止的进程）&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGSTOP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;17,19,23&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;DEF&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;终止进程&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGTSTP&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;18,20,24&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;D&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;控制终端（tty）上按下停止键&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGTTIN&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;21,21,26&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;D&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;后台进程企图从控制终端读&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;SIGTTOU&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;22,22,27&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;D&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;后台进程企图从控制终端写&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

</description>
        <pubDate>Mon, 25 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/25/linux-sign/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/25/linux-sign/</guid>
        
        <category>操作系统</category>
        
        
      </item>
    
      <item>
        <title>「Swoole」Table 内存表</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;swoole_table一个基于共享内存和锁实现的超高性能，并发数据结构。用于解决多进程/多线程数据共享和同步加锁问题。  &lt;br /&gt;
基于行锁，所以单次set/get/del在多线程/多进程的环境下是安全的。  &lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;set/get/del&lt;/code&gt;等方法是原子操作，用户代码中不需要担心数据加锁和同步的问题。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;优势&quot;&gt;优势&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;性能强悍，单线程每秒可读写200万次&lt;/li&gt;
  &lt;li&gt;应用代码无需加锁，&lt;code class=&quot;highlighter-rouge&quot;&gt;swoole_table&lt;/code&gt;内置行锁自旋锁，所有操作均是多线程/多进程安全。用户层完全不需要考虑数据同步问题。&lt;/li&gt;
  &lt;li&gt;支持多进程，&lt;code class=&quot;highlighter-rouge&quot;&gt;swoole_table&lt;/code&gt;可以用于多进程之间共享数据&lt;/li&gt;
  &lt;li&gt;使用行锁，而不是全局锁，仅当2个进程在同一CPU时间，并发读取同一条数据才会进行发生抢锁&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;接口&quot;&gt;接口&lt;/h3&gt;

&lt;h5 id=&quot;构造-__construct&quot;&gt;构造 __construct&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$conflict_proportion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$size&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;参数指定表格的最大行数，如果$size不是为2的N次方，如1024、8192,65536等，底层会自动调整为接近的一个数字，如果小于1024则默认成1024，即1024是最小值&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$conflict_proportion&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;是哈希冲突的最大比例，超过这个比例，共享内存表就不允许再添加新的行元素&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;增加列-column&quot;&gt;增加列 column&lt;/h5&gt;

&lt;p&gt;内存表增加一列&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$name&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定字段的名称&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$type&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定字段类型，支持3种类型，&lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_INT&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_FLOAT&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_STRING&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$size&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定字符串字段的最大长度，单位为字节。字符串类型的字段必须指定&lt;code class=&quot;highlighter-rouge&quot;&gt;$size&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;类型&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_INT&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;默认为4个字节，可以设置1，2，4，8一共4种长度&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_STRING&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;设置后，设置的字符串不能超过此长度&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Table::TYPE_FLOAT&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;会占用8个字节的内存&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;创建-create&quot;&gt;创建 create&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;创建内存表。  &lt;br /&gt;
执行&lt;code class=&quot;highlighter-rouge&quot;&gt;create&lt;/code&gt;向操作系统申请内存&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;系统内存不足，申请失败返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，反之，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt;使用共享内存来保存数据，在创建子进程前，务必要执行&lt;code class=&quot;highlighter-rouge&quot;&gt;create&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Server&lt;/code&gt;中使用&lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;create&lt;/code&gt;必须在&lt;code class=&quot;highlighter-rouge&quot;&gt;Server-&amp;gt;start()&lt;/code&gt;前执行&lt;/p&gt;

&lt;p&gt;获取实际占用内存的尺寸使用&lt;code class=&quot;highlighter-rouge&quot;&gt;$table-&amp;gt;memorySize&lt;/code&gt;&lt;/p&gt;

&lt;h5 id=&quot;设置值-set&quot;&gt;设置值 set&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;设置行的数据&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;Table&lt;/code&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;k-v&lt;/code&gt;的方式来访问数据。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;void&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;数据的&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;，相同的&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;对应同一行数据，如果&lt;code class=&quot;highlighter-rouge&quot;&gt;set&lt;/code&gt;同一个&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;，会覆盖上一次的数据&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$value&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;必须是一个数组，必须与字段定义的&lt;code class=&quot;highlighter-rouge&quot;&gt;$name&lt;/code&gt;完全相同&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;如果传入字符串长度超过了列定义时设定的最大尺寸，底层会自动截断。&lt;/p&gt;

&lt;h5 id=&quot;自增-incr&quot;&gt;自增 incr&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;原子自增操作。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;incr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mixed&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$incrby&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定数据的&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;，如果&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;对应的行不存在，默认列的值为&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$column&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定列名，仅支持浮点型和整型字段&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$incrby&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;增量，默认为&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;。如果列为整形，&lt;code class=&quot;highlighter-rouge&quot;&gt;$incrby&lt;/code&gt;必须为&lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt;型，如果列为浮点型，&lt;code class=&quot;highlighter-rouge&quot;&gt;$incrby&lt;/code&gt;必须为&lt;code class=&quot;highlighter-rouge&quot;&gt;float&lt;/code&gt;类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回最终的结果数值&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;自减-decr&quot;&gt;自减 decr&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;原子自减操作。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;decr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mixed&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$decrby&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定数据的&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;，如果&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;对应的行不存在，底层会首先将该行数据初始化为&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$column&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定列名，仅支持浮点型和整型字段&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$decrby&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;减量，默认为&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;。如果列为整形，&lt;code class=&quot;highlighter-rouge&quot;&gt;$decrby&lt;/code&gt;必须为&lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt;型，如果列为浮点型，&lt;code class=&quot;highlighter-rouge&quot;&gt;$decrby&lt;/code&gt;必须为&lt;code class=&quot;highlighter-rouge&quot;&gt;float&lt;/code&gt;类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回最终的结果数值&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;获取值-get&quot;&gt;获取值 get&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;获取一行数据&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定查询数据行的KEY，必须为字符串类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$field&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;当设置该值仅返回该字段的值，而不是整个记录&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;不存在，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，反之，返回结果&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;key是否存在-exist&quot;&gt;key是否存在 exist&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;检查table中是否存在某一个key。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定查询数据行的KEY，必须为字符串类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;不存在，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，反之，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;获取总数-count&quot;&gt;获取总数 count&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;返回table中存在的条目数&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;删除-del&quot;&gt;删除 del&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;删除数据&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;del&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$key&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定查询数据行的KEY，必须为字符串类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;不存在，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，反之，返回&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;实例&quot;&gt;实例&lt;/h3&gt;

&lt;h5 id=&quot;数组&quot;&gt;数组&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_INT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_STRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'num'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_FLOAT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'apple'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'id'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;145&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'iPhone'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'num'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3.1415&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'google'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'id'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;358&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;AlphaGo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'num'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3.1415&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'microsoft'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Windows&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'microsoft'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'num'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1997.03'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'apple'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'microsoft'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'google'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'num'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;500.90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'google'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;web-socket&quot;&gt;web-socket&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_INT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'from_id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_INT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;TYPE_STRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'127.0.0.1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9501&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dispatch_mode'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'connect'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$from_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$info&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;connection_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;INFO: fd=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, from_id=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$from_id&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, addr=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'remote_ip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'remote_port'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'receive'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$from_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;explode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;//get&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'get'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;//get self&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$get_fd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;intval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$info&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$get_fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;var_export&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;//set&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elseif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'set'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'from_id'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'fd'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'data'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ERROR&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;OK&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;command error.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$serv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 20 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/20/swoole-table/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/20/swoole-table/</guid>
        
        <category>php</category>
        
        
      </item>
    
      <item>
        <title>「Swoole」Lock 锁</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;创建一个锁，用来实现数据同步。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;支持五种类型锁：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;文件锁 &lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_FILELOCK&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;读写锁 &lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_RWLOCK&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;信号量 &lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_SEM&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;互斥锁 &lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_MUTEX&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;自旋锁 &lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_SPINLOCK&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;请勿在&lt;code class=&quot;highlighter-rouge&quot;&gt;onReceive&lt;/code&gt;等回调函数中创建锁，否则底层的&lt;code class=&quot;highlighter-rouge&quot;&gt;GlobalMemory&lt;/code&gt;内存会持续增长，造成内存泄漏。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;不要循环创建/销毁锁的对象，否则会发生内存泄漏&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;接口&quot;&gt;接口&lt;/h3&gt;

&lt;h5 id=&quot;构造方法-__construct&quot;&gt;构造方法 __construct&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lockfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$type&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;锁的类型&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$lockfile&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;当类型为&lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_FILELOCK&lt;/code&gt;时必须传入，指定文件锁的路径&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;加锁阻塞-lock&quot;&gt;加锁（阻塞） lock&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;加锁操作。如果有其他进程持有锁，那这里将进入阻塞，直到持有锁的进程&lt;code class=&quot;highlighter-rouge&quot;&gt;unlock&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;加锁非阻塞-trylock&quot;&gt;加锁（非阻塞） trylock&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;加锁操作。与&lt;code class=&quot;highlighter-rouge&quot;&gt;lock&lt;/code&gt;方法不同的是，&lt;code class=&quot;highlighter-rouge&quot;&gt;trylock&lt;/code&gt;不会阻塞，它会立即返回。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;trylock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;释放锁-unlock&quot;&gt;释放锁 unlock&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;加读锁阻塞-lock_read&quot;&gt;加读锁（阻塞） lock_read&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;只读加锁。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lock_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;加读锁非阻塞-trylock_read&quot;&gt;加读锁（非阻塞） trylock_read&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;只读加锁。此方法与&lt;code class=&quot;highlighter-rouge&quot;&gt;lock_read&lt;/code&gt;相同，但是非阻塞的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;trylock_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;加锁等待-lockwait&quot;&gt;加锁等待 lockwait&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;加锁操作，作用与swoole_lock-&amp;gt;lock一致，但lockwait可以设置超时时间。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;swoole_lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lockwait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$timeout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$timeout&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;传入超时时间，默认为1秒&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;成功&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; 失败&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;注意点&quot;&gt;注意点&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;只有&lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_RWLOCK&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_FILELOCK&lt;/code&gt;支持&lt;code class=&quot;highlighter-rouge&quot;&gt;lock_read&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOlE_SEM&lt;/code&gt;不支持&lt;code class=&quot;highlighter-rouge&quot;&gt;trylock&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;lock&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;trylock&lt;/code&gt;属于独占锁&lt;/li&gt;
  &lt;li&gt;只有&lt;code class=&quot;highlighter-rouge&quot;&gt;SWOOLE_MUTEX&lt;/code&gt;支持lockwait&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;实例&quot;&gt;实例&lt;/h3&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;/**
 * SWOOLE_MUTEX 互斥锁
 * SWOOLE_FILELOCK 文件锁，需要在第二个参数传入一个锁文件
 * SWOOLE_SPINLOCK 自旋锁(请查看swoole扩展信息，检测是否支持)
 * SWOOLE_SEM 信号量
 * SWOOLE_RWLOCK 读写锁
 */&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SWOOLE_MUTEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Master]create lock&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pcntl_fork&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Child] Wait Lock&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Child] Get Lock&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[Child] exit&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Master]release lock&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;unset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[Master]exit&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 20 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/20/swoole-lock/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/20/swoole-lock/</guid>
        
        <category>php</category>
        
        
      </item>
    
      <item>
        <title>「Swoole」Buffer 内存</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;让PHP开发者可以像C一样直接读写内存，提升程序的性能，又不用担心内存越界。  &lt;br /&gt;
swoole_buffer申请的内存并非共享内存，所以无法在多个进程间被共享&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;接口&quot;&gt;接口&lt;/h3&gt;

&lt;h5 id=&quot;构造-__construct&quot;&gt;构造 __construct&lt;/h5&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$size&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;定了缓冲区内存的初始尺寸。当申请的内存容量不够时&lt;code class=&quot;highlighter-rouge&quot;&gt;swoole&lt;/code&gt;底层会自动扩容。&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;追加-append&quot;&gt;追加 append&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;将一个字符串数据追加到缓存区末尾。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$data&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;写入的数据，支持二进制内容&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;新的内存长度&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;取出-substr&quot;&gt;取出 substr&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;从缓冲区中取出内容。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$offset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$remove&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;表示偏移量，如果为负数，表示倒数计算偏移量&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$length&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;表示读取数据的长度，默认为从&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset&lt;/code&gt;到整个缓存区末尾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$remove&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;表示从缓冲区的头部将此数据移除。只有&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset = 0&lt;/code&gt;时此参数才有效&lt;br /&gt;实际内存并没有释放，只是底层进行了指针偏移。当销毁此对象时才会真正释放内存&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;清理-clear&quot;&gt;清理 clear&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;清理缓存区数据。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;扩容-expand&quot;&gt;扩容 expand&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;为缓存区扩容。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;expand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$new_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$new_size&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;指定新的缓冲区尺寸，必须大于当前的尺寸&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;写-write&quot;&gt;写 write&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;向缓存区的任意内存位置写数据。&lt;code class=&quot;highlighter-rouge&quot;&gt;read/write&lt;/code&gt;函数可以直接读写内存。所以使用务必要谨慎，否则可能会破坏现有数据。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$offset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;偏移量&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$data&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;写入的数据&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;读-read&quot;&gt;读 read&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;读取缓存区任意位置的内存。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$offset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;参数&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;偏移量，如果&lt;code class=&quot;highlighter-rouge&quot;&gt;$offset&lt;/code&gt;错误返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$length&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;要读取的数据长度，如果&lt;code class=&quot;highlighter-rouge&quot;&gt;$length&lt;/code&gt;超过实际数据的长度返回&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h5 id=&quot;回收-recycle&quot;&gt;回收 recycle&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;回收缓冲中已经废弃的内存。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;recycle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;此方法能够在不清空缓冲区和使用&lt;code class=&quot;highlighter-rouge&quot;&gt;clear()&lt;/code&gt;的情况下，回收通过&lt;code class=&quot;highlighter-rouge&quot;&gt;swoole_buffer-&amp;gt;substr()&lt;/code&gt;移除但仍存在的部分内存空间。&lt;/p&gt;

&lt;h3 id=&quot;实例&quot;&gt;实例&lt;/h3&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 申请128内存&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swoole_buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'a'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 追加&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;json_encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PHP_EOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 取出，不移除&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$substr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;haha&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$read&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 取出，移除&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$substr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 清除&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$substr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 20 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/20/swoole-buffer/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/20/swoole-buffer/</guid>
        
        <category>php</category>
        
        
      </item>
    
  </channel>
</rss>
